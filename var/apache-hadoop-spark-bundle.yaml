series: trusty
services: 
  "hdfs-master": 
    charm: "cs:trusty/apache-hadoop-hdfs-master-7"
    num_units: 1
    constraints: "cpu-cores=2 mem=7168 root-disk=32768"
    annotations: 
      "gui-x": "0"
      "gui-y": "0"
    to: 
      - "0"
  "secondary-namenode": 
    charm: "cs:trusty/apache-hadoop-hdfs-secondary-5"
    num_units: 1
    constraints: "cpu-cores=2 mem=7168 root-disk=32768"
    annotations: 
      "gui-x": "0"
      "gui-y": "-300"
    to: 
      - "1"
  "yarn-master": 
    charm: "cs:trusty/apache-hadoop-yarn-master-5"
    num_units: 1
    constraints: "cpu-cores=2 mem=7168"
    annotations: 
      "gui-x": "0"
      "gui-y": "600"
    to: 
      - "2"
  "compute-slave": 
    charm: "cs:trusty/apache-hadoop-compute-slave-7"
    num_units: 3
    constraints: "cpu-cores=2 mem=3072 root-disk=32768"
    annotations: 
      "gui-x": "300"
      "gui-y": "300"
    to: 
      - "3"
      - "4"
      - "5"
  plugin: 
    charm: "cs:trusty/apache-hadoop-plugin-5"
    annotations: 
      "gui-x": "700"
      "gui-y": "300"
  spark: 
    charm: "cs:trusty/apache-spark-2"
    num_units: 1
    constraints: "cpu-cores=2 mem=3072"
    annotations: 
      "gui-x": "1000"
      "gui-y": "300"
    to: 
      - "6"
  zeppelin: 
    charm: "cs:trusty/apache-zeppelin-2"
    expose: true
    annotations: 
      "gui-x": "1300"
      "gui-y": "0"
  notebook: 
    charm: "cs:trusty/apache-spark-notebook-2"
    expose: true
    annotations: 
      "gui-x": "1300"
      "gui-y": "600"
relations: 
  - - "hdfs-master:secondary"
    - "secondary-namenode:secondary"
  - - "yarn-master:namenode"
    - "hdfs-master:namenode"
  - - "compute-slave:nodemanager"
    - "yarn-master:nodemanager"
  - - "compute-slave:datanode"
    - "hdfs-master:datanode"
  - - "plugin:resourcemanager"
    - "yarn-master:resourcemanager"
  - - "plugin:namenode"
    - "hdfs-master:namenode"
  - - "spark:hadoop-plugin"
    - "plugin:hadoop-plugin"
  - - "spark:spark"
    - "zeppelin:spark"
  - - "spark:spark"
    - "notebook:spark"
machines: 
  "0": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=2 cpu-power=650 mem=7680 root-disk=32768"
  "1": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=2 cpu-power=650 mem=7680 root-disk=32768"
  "2": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=2 cpu-power=650 mem=7680 root-disk=8192"
  "3": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=2 cpu-power=700 mem=3840 root-disk=32768"
  "4": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=2 cpu-power=700 mem=3840 root-disk=32768"
  "5": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=2 cpu-power=700 mem=3840 root-disk=32768"
  "6": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=2 cpu-power=700 mem=3840 root-disk=8192"
