series: trusty
services: 
  "hdfs-master": 
    charm: "cs:trusty/apache-hadoop-hdfs-master-7"
    num_units: 1
    constraints: "cpu-cores=2 mem=4096 root-disk=32768"
    annotations: 
      "gui-x": "500"
      "gui-y": "-250"
    to: 
      - "0"
  "yarn-master": 
    charm: "cs:trusty/apache-hadoop-yarn-master-5"
    num_units: 1
    constraints: "cpu-cores=2 mem=2048"
    annotations: 
      "gui-x": "950"
      "gui-y": "125"
    to: 
      - "1"
  "compute-slave": 
    charm: "cs:trusty/apache-hadoop-compute-slave-7"
    num_units: 3
    constraints: "cpu-cores=2 mem=4096 root-disk=32768"
    annotations: 
      "gui-x": "950"
      "gui-y": "-250"
    to: 
      - "2"
      - "3"
      - "4"
  plugin: 
    charm: "cs:trusty/apache-hadoop-plugin-5"
    annotations: 
      "gui-x": "5005"
      "gui-y": "125"
  spark: 
    charm: "cs:trusty/apache-spark-2"
    num_units: 1
    constraints: "cpu-cores=2 mem=4096"
    annotations: 
      "gui-x": "750"
      "gui-y": "450"
    to: 
      - "5"
  mongodb: 
    charm: "cs:trusty/mongodb-26"
    num_units: 3
    constraints: "cpu-cores=2 mem=4096 root-disk=16384"
    expose: true
    annotations: 
      "gui-x": "750"
      "gui-y": "1200"
    to: 
      - "6"
      - "7"
      - "8"
  tomcat: 
    charm: "cs:trusty/tomcat-1"
    num_units: 1
    constraints: "cpu-cores=4 mem=8192"
    expose: true
    annotations: 
      "gui-x": "500"
      "gui-y": "800"
    to: 
      - "9"
  saiku: 
    charm: "cs:~f-tom-n/trusty/saikuanalytics-0"
    annotations: 
      "gui-x": "950"
      "gui-y": "800"
relations: 
  - - "tomcat:website"
    - "saiku:website"
  - - "compute-slave:datanode"
    - "hdfs-master:datanode"
  - - "plugin:namenode"
    - "hdfs-master:namenode"
  - - "spark:hadoop-plugin"
    - "plugin:hadoop-plugin"
  - - "yarn-master:namenode"
    - "hdfs-master:namenode"
  - - "compute-slave:nodemanager"
    - "yarn-master:nodemanager"
  - - "plugin:resourcemanager"
    - "yarn-master:resourcemanager"
machines: 
  "0": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=2 cpu-power=650 mem=7680 root-disk=32768"
  "1": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=2 cpu-power=700 mem=3840 root-disk=8192"
  "2": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=2 cpu-power=650 mem=7680 root-disk=32768"
  "3": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=2 cpu-power=650 mem=7680 root-disk=32768"
  "4": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=2 cpu-power=650 mem=7680 root-disk=32768"
  "5": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=2 cpu-power=650 mem=7680 root-disk=8192"
  "6": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=2 cpu-power=650 mem=7680 root-disk=16384"
  "7": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=2 cpu-power=650 mem=7680 root-disk=16384"
  "8": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=2 cpu-power=650 mem=7680 root-disk=16384"
  "9": 
    series: trusty
    constraints: "arch=amd64 cpu-cores=4 cpu-power=1300 mem=15360 root-disk=8192"
